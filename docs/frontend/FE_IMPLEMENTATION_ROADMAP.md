# フロントエンド実装ロードマップ（Phase 1-6 統合版）

**作成日**: 2025-11-01
**総工数**: 14-18 週間（3.5-4.5 ヶ月）
**チーム構成**: FE 1-2 名、BE 1-2 名、QA 1 名

---

## 📅 **全体スケジュール**

```
Week 1-2    : Phase 1 準備（BE: P0 実装 / FE: 環境構築）
Week 3-6    : Phase 1（基本機能）
Week 7-10   : Phase 2（編集・ワークフロー）
Week 11-13  : Phase 3（レポート・エクスポート）
Week 14-16  : Phase 4（リアルタイム）
Week 17-18  : Phase 5-6（最適化・運用準備）
```

---

## 🎯 **Phase 1: 基本機能（4週間）**

### **目標**: MVP 完成（ダッシュボード・案件管理・データ表示）

### **1-1. 環境構築・セットアップ（Week 1-2）**

#### **BE 側（Week 1-2、並行実装）**

**P0 リスト:**
```python
# 1. PostgreSQL セットアップ
□ Docker Compose で PostgreSQL 15 起動
□ スキーママイグレーション実行
□ テストデータ挿入（3 案件）

# 2. ユーザー・認証実装
□ User テーブル実装
□ JWT トークン生成・検証ロジック実装
□ POST /api/v1/auth/register エンドポイント
□ POST /api/v1/auth/login エンドポイント
□ POST /api/v1/auth/refresh エンドポイント

# 3. CRUD エンドポイント（最小セット）
□ POST /api/v1/cases
□ GET /api/v1/cases (フィルタ・ページネーション)
□ GET /api/v1/cases/{id}
□ POST /api/v1/observations
□ GET /api/v1/cases/{id}/observations

# 4. 統合テスト・ドキュメント
□ pytest で各エンドポイントテスト
□ Swagger ドキュメント確認可能
```

**工数**: 12-16 時間

---

#### **FE 側（Week 1-2）**

```javascript
// 1. プロジェクト初期化
□ Vite で React TS プロジェクト作成
□ TanStack Query / Zustand インストール
□ Tailwind CSS + shadcn/ui セットアップ
□ React Router v6 設定

// 2. API クライアント実装
□ axios インスタンス作成
□ API レスポンス型定義（TypeScript）
□ Zustand ストア作成（auth, cases）
□ TanStack Query hooks 作成

// 3. 基本画面実装
□ ログイン画面（email/password）
□ レイアウト・ナビゲーション
□ ダッシュボード（統計カード・案件一覧表）
□ 案件詳細ページ（読み取り専用）

// 4. スタイリング・UX
□ Tailwind CSS カスタマイズ
□ レスポンシブ対応（デスクトップ・タブレット・モバイル）
□ ローディング状態表示
□ エラーハンドリング UI
```

**工数**: 16-20 時間

---

### **1-2. Phase 1 コア機能実装（Week 3-6）**

#### **実装範囲**

```
✅ 実装する:
1. ダッシュボード
   ├─ 案件ステータス統計（pie chart）
   ├─ 直近の活動ログ
   ├─ タスク一覧（承認待ち・期限付き）
   └─ KPI カード（進行中数・承認待ち数）

2. 案件管理
   ├─ 新規案件作成フォーム
   ├─ 案件一覧（テーブル・フィルタ・ソート）
   ├─ 案件詳細（タブ切り替え）
   │  ├─ 概要タブ
   │  ├─ 情報収集タブ（PUB/EXT/INT/CONF）
   │  ├─ Observation タブ（読み取り専用）
   │  └─ レポートタブ（プレビュー）
   └─ ステータス遷移UI

3. データ表示
   ├─ Observation テーブル表示
   ├─ フィルタリング（section, source_tag, confidence）
   ├─ ソート・ページネーション
   ├─ 出典・信頼度表示
   └─ 履歴表示（バージョン履歴）

4. ナビゲーション
   ├─ トップバー（logo, 通知, ユーザーメニュー）
   ├─ サイドバー（メニュー・フォルダツリー）
   └─ パンくずリスト

⏸️ スキップ（Phase 2 へ）:
- Observation 編集機能
- 矛盾検出・解決UI
- 承認ワークフロー
- ドキュメント処理
```

#### **各週の進捗**

**Week 3:**
- ダッシュボード実装（50% 完成）
- 案件一覧ページ実装
- テーブルコンポーネント作成
- フィルタリング UI

**Week 4:**
- 案件詳細ページ実装（概要・情報収集タブ）
- Observation データ表示
- 履歴表示機能
- データフェッチング最適化

**Week 5:**
- レポートプレビュー表示（読み取り専用）
- ナビゲーション完成
- スタイリング・レスポンシブ調整
- バグ修正・最適化

**Week 6:**
- E2E テスト（Playwright）
- Lighthouse パフォーマンス測定
- アクセシビリティチェック（WAVE）
- Phase 1 完成版テスト

---

#### **使用ライブラリ**

```json
{
  "dependencies": {
    "react": "^18.2",
    "react-dom": "^18.2",
    "react-router-dom": "^6.x",
    "@tanstack/react-query": "^5.x",
    "zustand": "^4.x",
    "axios": "^1.x",
    "tailwindcss": "^3.x"
  },
  "devDependencies": {
    "typescript": "^5.x",
    "@playwright/test": "^1.x",
    "vitest": "^1.x"
  }
}
```

---

### **1-3. Phase 1 QA・デプロイ（Week 6）**

```
□ 動作テスト（全ブラウザ・デバイス）
□ パフォーマンステスト（Lighthouse）
□ セキュリティチェック（npm audit）
□ アクセシビリティ監査（WCAG 2.1 AA）
□ Docker コンテナ化（Dockerfile 作成）
□ GitHub Actions CI/CD 構築
□ ステージング環境へデプロイ
```

---

## 🎯 **Phase 2: 編集・ワークフロー（4週間）**

### **目標**: データ編集・承認フロー完成

### **2-1. BE 準備（Week 7-8、並行実装）**

```python
# 実装すべきエンドポイント
□ PUT /api/v1/observations/{id}        (編集)
□ DELETE /api/v1/observations/{id}     (削除)
□ GET /api/v1/conflicts                (矛盾一覧)
□ POST /api/v1/conflicts/{id}/resolve  (矛盾解決)
□ GET /api/v1/cases/{id}/tasks         (タスク一覧)
□ PUT /api/v1/tasks/{id}               (タスク更新)
□ POST /api/v1/documents/upload        (ファイルアップロード)
□ GET /api/v1/documents/{id}           (ドキュメント取得)

# テーブル追加実装
□ conflicts テーブル実装
□ tasks テーブル実装
□ approvals テーブル実装
□ documents テーブル実装完全化

# 承認ワークフローロジック
□ ステータス遷移ルール実装
□ SLA 計算ロジック
□ 通知トリガー設定
```

**工数**: 20-24 時間

---

### **2-2. FE 実装（Week 7-10）**

#### **Week 7-8: エディター・フォーム実装**

```javascript
// Observation 編集機能
□ インライン編集（셀 클릭で編集可能）
  ├─ number 型: スピナー入力
  ├─ string 型: テキスト入力
  ├─ date 型: DatePicker
  ├─ boolean 型: Toggle
  └─ json 型: JSON エディタ

□ 一括編集フォーム
  ├─ フィールド選択
  ├─ 値入力
  ├─ 出典入力
  └─ 信頼度スライダー

□ 削除確認ダイアログ

// ドキュメント処理
□ ファイルアップロード UI
  ├─ ドラッグ&ドロップ対応
  ├─ 複数ファイル対応
  ├─ プログレスバー表示
  └─ 成功/失敗メッセージ

□ ドキュメント一覧・ビューア
  ├─ 分類レベル表示
  ├─ PDF プレビュー
  └─ ダウンロード機能
```

#### **Week 9: 矛盾検出・解決 UI**

```javascript
// 矛盾検出
□ 矛盾一覧画面
  ├─ 重要度別フィルタ（Critical / Warning / Info）
  ├─ ソート（重要度・タイプ）
  ├─ 詳細表示（モーダル）
  └─ バッチ処理（複数選択）

// 矛盾解決
□ 解決フロー UI
  ├─ 競合する値の表示（サイドバイサイド）
  ├─ 差異率・信頼度表示
  ├─ 推奨アクション表示
  ├─ 手動で値を選択
  ├─ 理由メモ入力
  └─ 解決確定ボタン
```

#### **Week 10: 承認ワークフロー**

```javascript
// 承認インボックス
□ 承認待ち一覧
  ├─ SLA タイマー表示（色分け: 緑→黄→赤）
  ├─ 優先度表示
  ├─ 担当者表示
  └─ バッチ承認チェックボックス

□ 承認詳細画面
  ├─ 対象データ表示
  ├─ 修正提案表示
  ├─ 承認 / 却下ボタン
  ├─ コメント入力
  ├─ 理由テンプレート選択
  └─ 承認履歴表示

// タスク管理
□ タスク一覧
  ├─ タスクタイプ別フィルタ
  ├─ 優先度・期限表示
  └─ チェックボックスで完了

□ タスク詳細
  ├─ 説明・指示表示
  ├─ 期限・担当者
  └─ コメント機能
```

---

### **2-3. QA・最適化（Week 10）**

```
□ 承認フロー E2E テスト
□ ファイルアップロード検証
□ 矛盾解決ロジック検証
□ パフォーマンス測定
□ アクセシビリティ再監査
```

---

## 🎯 **Phase 3: レポート生成・エクスポート（3週間）**

### **3-1. BE 準備（Week 11, 並行実装）**

```python
# レポート生成・保存
□ PUT /api/v1/reports/{id}    (レポート更新・保存)
□ GET /api/v1/reports/{id}    (取得)
□ POST /api/v1/reports/{id}/export  (エクスポート)

# マスキング・非表示ロジック
□ disclosure_level ベースのフィルタリング
□ 個人情報マスキング実装
□ LP / IC 差分処理

# テンプレート管理
□ レポートセクションテンプレート管理
□ カスタマイズ項目の定義

# Google Docs / Word 連携
□ Google Docs API 統合（アカウント認証）
□ Word (.docx) エクスポート実装
```

**工数**: 12-16 時間

---

### **3-2. FE 実装（Week 11-13）**

#### **Week 11: レポート生成・プレビュー**

```javascript
// レポート生成フロー
□ 「レポート生成」ボタン
  ├─ 選択確認ダイアログ
  └─ 生成完了通知

□ レポートプレビュー
  ├─ Markdown 形式表示
  ├─ 章ごとの完了度表示
  ├─ トークン数表示
  └─ 差分ハイライト（前バージョン比較）

// LP / IC トグル
□ バージョン切り替え
  ├─ LC / IC ボタンタブ
  └─ 非表示セクションのグレーアウト
```

#### **Week 12: トークナイズ・編集機能**

```javascript
// トークナイズ表示
□ 単語ベースのハイライト表示
□ 単語クリックで詳細情報表示
□ 信頼度・出典表示

// トークン編集
□ 個別トークンの削除 / 置換
□ セクション単位での再生成
□ スペル修正UI
□ マスキング確認（個人情報の確認）
```

#### **Week 13: エクスポート機能**

```javascript
// PDF エクスポート
□ Puppeteer / Playwright で HTML → PDF 変換
□ ロゴ・ヘッダー・フッター挿入
□ ページネーション

// Google Docs エクスポート
□ Google 認証フロー
□ 新規ドキュメント作成
□ フォーマッティング保持

// Word エクスポート
□ .docx ファイル生成
□ テーブル・フォーマッティング
□ 表紙・目次自動生成
```

---

## 🎯 **Phase 4: リアルタイム・通知（2週間）**

### **4-1. BE 準備（Week 14, 並行実装）**

```python
# WebSocket 実装
□ FastAPI WebSocket 設定
□ クライアント接続管理
□ メッセージルーティング

# イベント駆動システム
□ Observation 更新時のイベント配信
□ Conflict 検出時の通知
□ Task 作成・更新時の通知

# 進捗通知
□ PUB 収集進捗の配信
□ レポート生成進捗の配信
```

**工数**: 8-12 時間

---

### **4-2. FE 実装（Week 14-15）**

```javascript
// WebSocket クライアント実装
□ Zustand + WebSocket hook
□ 自動再接続ロジック
□ メッセージハンドラー

// リアルタイム更新
□ Observation 変更時の即座反映
□ Conflict 検出時の自動更新
□ タスク完了時の UI 更新

// 進捗通知
□ 進捗バー表示（PUB 収集中）
□ トースト通知
□ インボックス通知

// アクティビティフィード
□ リアルタイムフィード更新
□ ユーザーアクション表示
□ タイムスタンプ
```

---

## 🎯 **Phase 5-6: 最適化・運用準備（2週間）**

### **5-1. パフォーマンス最適化**

```javascript
// コード分割
□ React.lazy() で遅延ロード
□ ルート別バンドル分割

// キャッシング戦略
□ TanStack Query staleTime 最適化
□ ローカルストレージ活用

// メモリリーク対策
□ 不要な subscription クリーンアップ
□ イベントリスナー削除
```

---

### **5-2. 本番環境準備**

```
□ SSL 証明書取得（Let's Encrypt）
□ セキュリティヘッダー設定（HSTS等）
□ CORS 設定の確認
□ アナリティクス導入（Google Analytics）
□ エラートラッキング（Sentry）
□ ログ集約（CloudWatch / ELK）
```

---

### **5-3. 運用ドキュメント**

```
□ デプロイメントガイド
□ トラブルシューティング
□ ユーザーマニュアル
□ API ドキュメント（Swagger）
□ アーキテクチャドキュメント
```

---

## 📊 **工数と人数配置**

| Phase | BE 工数 | FE 工数 | QA 工数 | 推奨人数 |
|-------|--------|--------|--------|---------|
| **1** | 28h | 36h | 12h | BE1, FE1-2, QA0.5 |
| **2** | 24h | 32h | 10h | BE1, FE1-2, QA0.5 |
| **3** | 16h | 24h | 8h | BE0.5, FE1-2, QA0.5 |
| **4** | 12h | 16h | 4h | BE0.5, FE1, QA0.5 |
| **5-6** | 8h | 16h | 4h | BE0.5, FE1, QA0.5 |
| **合計** | **88h** | **124h** | **38h** | **最小 2人** |

**推奨チーム構成**:
- バックエンド: 1 名（リード）+ 0.5 名（サポート）
- フロントエンド: 2 名（パラレル）
- QA: 0.5 名（兼務可）

---

## 🚀 **推奨デプロイ戦略**

### **環境構成**

```
開発 (Development)
└─ localhost:3000 (FE) + localhost:8000 (BE)
   └─ SQLite / 限定テストデータ

ステージング (Staging)
└─ staging.fund-app.com (FE) + api-staging.fund-app.com (BE)
   └─ PostgreSQL (本番同等)
   └─ 実データのサブセット

本番 (Production)
└─ app.fund-app.com (FE) + api.fund-app.com (BE)
   └─ PostgreSQL (RDS)
   └─ CDN (CloudFront / Cloudflare)
```

### **CI/CD パイプライン**

```yaml
# GitHub Actions
- PR 作成時: 自動テスト・Lint 実行
- Develop マージ時: ステージング環境へ自動デプロイ
- Main マージ時: 本番環境へ手動承認後デプロイ
- タグ作成時: リリースノート自動生成
```

---

## 📋 **進捗追跡用 KPI**

```
Phase 1:
- テスト覆対度: 70% 以上
- Lighthouse スコア: 85+
- 初期ロード時間: < 2秒

Phase 2:
- 承認フロー E2E テスト: 100% パス
- アクセシビリティ: WCAG 2.1 AA

Phase 3:
- エクスポート成功率: 99%
- レポート生成時間: < 5秒

Phase 4:
- WebSocket 接続率: 95%
- リアルタイム更新遅延: < 500ms

Phase 5-6:
- サイト速度: Core Web Vitals すべて緑
- エラー率: < 0.1%
```

---

## 🔗 **関連ドキュメント**

1. `【フロントエンド設計】必要な情報整理.md` - 詳細設計
2. `FRONTEND_READINESS_ASSESSMENT.md` - 準備状況評価
3. `IMMEDIATE_ACTION_PLAN.md` - 即時アクション
4. `FRONTEND_PREPARATION_CHECKLIST.md` - 準備チェックリスト

---

**作成者**: Claude Code
**最終更新**: 2025-11-01
